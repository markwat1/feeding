# ペット給餌トラッカー

ペットの給餌記録を管理するWebアプリケーションです。給餌スケジュールの設定、実際の給餌記録の管理、体重記録、メンテナンス記録などの機能を提供します。

## 機能概要

- **ペット管理**: ペットの基本情報（名前、種類、生年月日）の登録・編集
- **給餌スケジュール管理**: 定期的な給餌時間と餌の種類の設定
- **給餌記録管理**: 実際の給餌時間と完食状況の記録
- **体重記録**: ペットの体重変化の追跡
- **メンテナンス記録**: 給水器やトイレの清掃記録
- **カレンダー表示**: 月間の給餌状況を視覚的に確認
- **統計表示**: 給餌完了率などの統計情報
- **データエクスポート**: CSV形式でのデータ出力

## システム要件

- Node.js 18.0.0 以上
- npm 9.0.0 以上
- SQLite3（自動でインストールされます）

## インストール方法

### 1. リポジトリのクローン

```bash
git clone <repository-url>
cd pet-feeding-tracker
```

### 2. バックエンドのセットアップ

```bash
cd backend
npm install
```

### 3. フロントエンドのセットアップ

```bash
cd ../frontend
npm install
```

### 4. データベースの初期化

バックエンドディレクトリで以下を実行：

```bash
cd ../backend
npm run dev
```

初回起動時に自動的にデータベースが作成され、必要なテーブルが設定されます。

## 使用方法

### 開発環境での起動

#### 1. バックエンドサーバーの起動

```bash
cd backend
npm run dev
```

サーバーは `http://localhost:3001` で起動します。

#### 2. フロントエンドサーバーの起動

新しいターミナルウィンドウで：

```bash
cd frontend
npm run dev
```

フロントエンドは `http://localhost:3000` で起動します。

### 本番環境での起動

#### 1. バックエンドのビルドと起動

```bash
cd backend
npm run build
npm start
```

#### 2. フロントエンドのビルド

```bash
cd frontend
npm run build
```

ビルドされたファイルは `frontend/dist` ディレクトリに出力されます。

## アプリケーションの使い方

### 初期設定

1. **ペットの登録**
   - トップページの「ペット管理」から新しいペットを登録
   - ペット名、種類、生年月日を入力

2. **餌の種類の登録**
   - 「餌管理」から使用する餌の種類を登録
   - 餌の名前、ブランド、説明を入力

3. **給餌スケジュールの設定**
   - 「スケジュール管理」から定期的な給餌時間を設定
   - 時間と餌の種類を選択

### 日常的な使用

#### 給餌記録の追加

1. 「給餌記録」ページにアクセス
2. 「新しい記録を追加」ボタンをクリック
3. 以下の情報を入力：
   - 給餌スケジュール（事前に設定したもの）
   - 実際の給餌時刻
   - 完食状況（完食した/残した）
   - メモ（任意）

#### 体重記録の追加

1. 「体重記録」ページにアクセス
2. 「新しい記録を追加」ボタンをクリック
3. 以下の情報を入力：
   - ペット（複数ペットがいる場合）
   - 体重
   - 測定日
   - メモ（任意）

#### メンテナンス記録の追加

1. 「メンテナンス」ページにアクセス
2. 「新しい記録を追加」ボタンをクリック
3. 以下の情報を入力：
   - メンテナンス種類（給水器/トイレ）
   - 実施日時
   - 内容の説明

### カレンダー表示

- 「カレンダー」ページで月間の給餌状況を確認
- 各日付をクリックすると詳細情報を表示
- 色分けで給餌完了状況を視覚的に確認

### 統計情報の確認

- 「統計」ページで以下の情報を確認：
  - 給餌完了率
  - 体重の変化グラフ
  - 月間の給餌回数

### データのエクスポート

各記録ページから「エクスポート」ボタンでCSVファイルをダウンロード可能：
- 給餌記録のエクスポート
- 体重記録のエクスポート
- メンテナンス記録のエクスポート

## テスト実行

### バックエンドテスト

```bash
cd backend
npm test
```

### フロントエンドテスト

```bash
cd frontend
npm test
```

## トラブルシューティング

### よくある問題

#### 1. データベース接続エラー

**症状**: バックエンド起動時にデータベースエラーが発生

**解決方法**:
```bash
cd backend
rm -rf data/  # データベースファイルを削除
npm run dev   # 再起動してデータベースを再作成
```

#### 2. ポート競合エラー

**症状**: `EADDRINUSE` エラーが発生

**解決方法**:
- 他のアプリケーションが同じポートを使用していないか確認
- 必要に応じて `backend/src/app.ts` と `frontend/vite.config.ts` でポート番号を変更

#### 3. フロントエンドがバックエンドに接続できない

**症状**: API呼び出しが失敗する

**解決方法**:
- バックエンドサーバーが起動していることを確認
- `frontend/vite.config.ts` のプロキシ設定を確認

### ログの確認

- バックエンドのログ: コンソール出力を確認
- フロントエンドのログ: ブラウザの開発者ツールのコンソールを確認

## 開発情報

### プロジェクト構造

```
pet-feeding-tracker/
├── backend/                 # バックエンドAPI
│   ├── src/
│   │   ├── models/         # データモデル
│   │   ├── routes/         # APIルート
│   │   ├── database/       # データベース設定
│   │   └── __tests__/      # テストファイル
│   └── package.json
├── frontend/               # フロントエンドReactアプリ
│   ├── src/
│   │   ├── components/     # Reactコンポーネント
│   │   ├── hooks/          # カスタムフック
│   │   ├── services/       # API呼び出し
│   │   └── types/          # TypeScript型定義
│   └── package.json
└── README.md
```

### 技術スタック

**バックエンド**:
- Node.js + Express
- TypeScript
- SQLite3 + better-sqlite3
- Jest（テスト）

**フロントエンド**:
- React 18
- TypeScript
- Vite
- Chart.js（グラフ表示）
- Vitest（テスト）

## ライセンス

MIT License

## サポート

問題や質問がある場合は、GitHubのIssuesページでお知らせください。